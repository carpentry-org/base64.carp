(load "base64.carp")
(load "Test.carp")
(use-all Base64 Test)

(defn main []
  (with-test test
    (assert-equal test
      "AgME"
      &(encode &[2 3 4])
      "test that encoding data works"
    )
    (assert-equal test
      "SGVsbG8h"
      &(encode-str "Hello!")
      "test that encoding strings works"
    )
    (assert-equal test
      &[2 3 4]
      &(decode "AgME")
      "test that decoding data works"
    )
    (assert-equal test
      "Hello"
      &(decode-str "SGVsbG8=")
      "test that decoding strings works"
    )
    (assert-equal test
                  "aMO2eQ=="
                  &(encode-str "h√∂y")
                  "encoding UTF8 strings works"
    )
    (print-test-results test))
)
